<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="60,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T1U3">r</span>, <span class="var type1" id="S3T2U4">A</span>] = state_transition(<span class="var type1" id="S2T1U7">r</span>, <span class="var type1" id="S4T3U8">delta</span>, <span class="var type1" id="S5T3U9">delta_x</span>, <span class="var type1" id="S6T3U10">delta_y</span>, <span class="var type1" id="S7T3U11">delta_phi</span>, <span class="var type1" id="S8T4U12">interp_mode</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="60,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="60,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T3:U9"><span class="var type1" id="S9T3U15">phi0</span> = <span class="mxinfo " id="T3:U11"><span class="var type1" id="S2T1U17">r</span>(<span class="mxinfo " id="T3:U13">2</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T3:U14"><span class="var type1" id="S10T3U21">theta</span> = <span class="mxinfo " id="T3:U16"><span class="mxinfo " id="T3:U17"><span class="mxinfo " id="T3:U18"><span class="mxinfo " id="T3:U19">pi</span>/<span class="mxinfo " id="T3:U20">2</span></span> + <span class="var type1" id="S9T3U28">phi0</span></span> - <span class="var type1" id="S7T3U29">delta_phi</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T3:U23"><span class="var type1" id="S12T3U32">a</span> = <span class="mxinfo " id="T3:U25"><span class="mxinfo " id="T3:U26"><span class="mxinfo " id="T3:U27"><span class="var type1" id="S2T1U36">r</span>(<span class="mxinfo " id="T3:U29">1</span>)</span> - <span class="var type1" id="S6T3U38">delta_y</span></span> + <span class="mxinfo " id="T3:U31"><span class="var type1" id="S5T3U40">delta_x</span>*<span class="mxinfo " id="T3:U33">tan(<span class="var type1" id="S9T3U43">phi0</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T3:U35"><span class="var type1" id="S14T3U46">c</span> = <span class="mxinfo " id="T3:U37"><span class="mxinfo " id="T3:U38"><span class="var type1" id="S5T3U49">delta_x</span>/<span class="mxinfo " id="T3:U40">cos(<span class="var type1" id="S9T3U52">phi0</span>)</span></span> - <span class="mxinfo " id="T3:U42"><span class="mxinfo " id="T3:U43"><span class="var type1" id="S12T3U55">a</span>*<span class="mxinfo " id="T3:U45">sin(<span class="var type1" id="S7T3U58">delta_phi</span>)</span></span>/<span class="mxinfo " id="T3:U47">sin(<span class="var type1" id="S10T3U61">theta</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T3:U49"><span class="var type1" id="S17T3U64">dx</span> = <span class="var type1" id="S14T3U65">c</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,8" id="srcline8"> 8</a></span><span class="line"><span class="mxinfo " id="T3:U52"><span class="mxinfo " id="T3:U53"><span class="var type1" id="S2T1U69">r</span>(<span class="mxinfo " id="T3:U55">1</span>)</span> = <span class="mxinfo " id="T3:U56"><span class="mxinfo " id="T3:U57"><span class="var type1" id="S12T3U73">a</span>*<span class="mxinfo " id="T3:U59">cos(<span class="var type1" id="S9T3U76">phi0</span>)</span></span>/<span class="mxinfo " id="T3:U61">sin(<span class="var type1" id="S10T3U79">theta</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T3:U63"><span class="mxinfo " id="T3:U64"><span class="var type1" id="S2T1U83">r</span>(<span class="mxinfo " id="T3:U66">2</span>)</span> = <span class="mxinfo " id="T3:U67"><span class="var type1" id="S9T3U86">phi0</span> - <span class="var type1" id="S7T3U87">delta_phi</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,10" id="srcline10">10</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="60,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T2:U70"><span class="var type1" id="S3T2U90">A</span> = <span class="mxinfo " id="T2:U72">eye(<span class="mxinfo " id="T3:U73">numel(<span class="var type1" id="S2T1U95">r</span>)</span>)</span></span>;    </span></span>
<span class="srcline"><span class="lineno"><a href="60,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T3:U75"><span class="mxinfo " id="T3:U76"><span class="var type1" id="S3T2U99">A</span>(<span class="mxinfo " id="T3:U78">2</span>,<span class="mxinfo " id="T3:U79">3</span>)</span> = <span class="mxinfo " id="T3:U80"><span class="var type1" id="S17T3U103">dx</span>/<span class="mxinfo " id="T3:U82">sqrt(<span class="mxinfo " id="T3:U83"><span class="mxinfo " id="T3:U84">1</span>-<span class="mxinfo " id="T3:U85"><span class="mxinfo " id="T3:U86"><span class="mxinfo " id="T3:U87"><span class="var type1" id="S4T3U111">delta</span>^2</span>*<span class="mxinfo " id="T3:U89"><span class="mxinfo " id="T3:U90"><span class="var type1" id="S2T1U115">r</span>(<span class="mxinfo " id="T3:U92">3</span>)</span>^2</span></span>/<span class="mxinfo " id="T3:U93">4</span></span></span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="60,14" id="srcline14">14</a></span><span class="line"><span class="keyword">if</span> <span class="mxinfo " id="T5:U94"><span class="var type1" id="S8T4U122">interp_mode</span> ==  <span class="mxinfo " id="T3:U96">0</span></span>    </span></span>
<span class="srcline"><span class="lineno"><a href="60,15" id="srcline15">15</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S21T3U126">i</span>=<span class="mxinfo " id="T3:U98">3</span>:<span class="mxinfo " id="T3:U99"><span class="mxinfo " id="T3:U100">numel(<span class="var type1" id="S2T1U132">r</span>)</span>-<span class="mxinfo " id="T3:U102">1</span></span> <span class="comment">%lineare Interpolation der Kr√ºmmungen</span></span></span>
<span class="srcline"><span class="lineno"><a href="60,16" id="srcline16">16</a></span><span class="line">        <span class="mxinfo " id="T3:U103"><span class="mxinfo " id="T3:U104"><span class="var type1" id="S3T2U137">A</span>(<span class="var type1" id="S21T3U138">i</span>,<span class="var type1" id="S21T3U139">i</span>)</span> = <span class="mxinfo " id="T3:U108"><span class="mxinfo " id="T3:U109">1</span>-<span class="mxinfo " id="T3:U110"><span class="var type1" id="S17T3U143">dx</span>/<span class="var type1" id="S4T3U144">delta</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,17" id="srcline17">17</a></span><span class="line">        <span class="mxinfo " id="T3:U113"><span class="mxinfo " id="T3:U114"><span class="var type1" id="S3T2U148">A</span>(<span class="var type1" id="S21T3U149">i</span>,<span class="mxinfo " id="T3:U117"><span class="var type1" id="S21T3U151">i</span>+<span class="mxinfo " id="T3:U119">1</span></span>)</span> = <span class="mxinfo " id="T3:U120"><span class="var type1" id="S17T3U154">dx</span>/<span class="var type1" id="S4T3U155">delta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,18" id="srcline18">18</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="60,19" id="srcline19">19</a></span><span class="line">    <span class="mxinfo " id="T3:U123"><span class="mxinfo " id="T3:U124"><span class="var type1" id="S3T2U159">A</span>(<span class="mxinfo " id="T3:U126">numel(<span class="var type1" id="S2T1U162">r</span>)</span>,<span class="mxinfo " id="T3:U128">numel(<span class="var type1" id="S2T1U165">r</span>)</span>)</span> = <span class="mxinfo " id="T3:U130">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,20" id="srcline20">20</a></span><span class="line"><span class="keyword">else</span>        </span></span>
<span class="srcline"><span class="lineno"><a href="60,21" id="srcline21">21</a></span><span class="line">    <span class="mxinfo " id="T3:U131"><span class="var type1" id="S22T3U170">d</span> = <span class="mxinfo " id="T3:U133"><span class="var type1" id="S17T3U172">dx</span>/<span class="var type1" id="S4T3U173">delta</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,22" id="srcline22">22</a></span><span class="line">    <span class="mxinfo " id="T3:U136"><span class="mxinfo " id="T3:U137"><span class="var type1" id="S3T2U177">A</span>(<span class="mxinfo " id="T3:U139">3</span>,<span class="mxinfo " id="T3:U140">3</span>)</span> = <span class="mxinfo " id="T3:U141"><span class="mxinfo " id="T3:U142"><span class="mxinfo " id="T3:U143"><span class="mxinfo " id="T3:U144"><span class="mxinfo " id="T3:U145">1</span>/<span class="mxinfo " id="T3:U146">2</span></span>*(<span class="mxinfo " id="T3:U147"><span class="mxinfo " id="T3:U148"><span class="var type1" id="S22T3U189">d</span>^2</span>-<span class="var type1" id="S22T3U191">d</span></span>)</span> + <span class="mxinfo " id="T3:U151">1</span></span>-<span class="mxinfo " id="T3:U152"><span class="var type1" id="S22T3U194">d</span>^2</span></span></span>; <span class="comment">%Kr√ºmmung am ersten Punkt = Kr√ºmmung am zweiten Punkt</span></span></span>
<span class="srcline"><span class="lineno"><a href="60,23" id="srcline23">23</a></span><span class="line">    <span class="mxinfo " id="T3:U154"><span class="mxinfo " id="T3:U155"><span class="var type1" id="S3T2U199">A</span>(<span class="mxinfo " id="T3:U157">3</span>,<span class="mxinfo " id="T3:U158">4</span>)</span> = <span class="mxinfo " id="T3:U159"><span class="mxinfo " id="T3:U160"><span class="mxinfo " id="T3:U161">1</span>/<span class="mxinfo " id="T3:U162">2</span></span>*(<span class="mxinfo " id="T3:U163"><span class="mxinfo " id="T3:U164"><span class="var type1" id="S22T3U209">d</span>^2</span>+<span class="var type1" id="S22T3U211">d</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,24" id="srcline24">24</a></span><span class="line">    <span class="keyword">for</span> <span class="var type1" id="S21T3U214">i</span>=<span class="mxinfo " id="T3:U168">4</span>:<span class="mxinfo " id="T3:U169"><span class="mxinfo " id="T3:U170">numel(<span class="var type1" id="S2T1U220">r</span>)</span>-<span class="mxinfo " id="T3:U172">1</span></span> <span class="comment">%quadratische Interpolation der Kr√ºmmungen    </span></span></span>
<span class="srcline"><span class="lineno"><a href="60,25" id="srcline25">25</a></span><span class="line">        <span class="mxinfo " id="T3:U173"><span class="mxinfo " id="T3:U174"><span class="var type1" id="S3T2U225">A</span>(<span class="var type1" id="S21T3U226">i</span>,<span class="mxinfo " id="T3:U177"><span class="var type1" id="S21T3U228">i</span>-<span class="mxinfo " id="T3:U179">1</span></span>)</span> = <span class="mxinfo " id="T3:U180"><span class="mxinfo " id="T3:U181"><span class="mxinfo " id="T3:U182">1</span>/<span class="mxinfo " id="T3:U183">2</span></span>*(<span class="mxinfo " id="T3:U184"><span class="mxinfo " id="T3:U185"><span class="var type1" id="S22T3U237">d</span>^2</span>-<span class="var type1" id="S22T3U239">d</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,26" id="srcline26">26</a></span><span class="line">        <span class="mxinfo " id="T3:U188"><span class="mxinfo " id="T3:U189"><span class="var type1" id="S3T2U243">A</span>(<span class="var type1" id="S21T3U244">i</span>,<span class="var type1" id="S21T3U245">i</span>)</span> = <span class="mxinfo " id="T3:U193"><span class="mxinfo " id="T3:U194">1</span>-<span class="mxinfo " id="T3:U195"><span class="var type1" id="S22T3U249">d</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,27" id="srcline27">27</a></span><span class="line">        <span class="mxinfo " id="T3:U197"><span class="mxinfo " id="T3:U198"><span class="var type1" id="S3T2U254">A</span>(<span class="var type1" id="S21T3U255">i</span>,<span class="mxinfo " id="T3:U201"><span class="var type1" id="S21T3U257">i</span>+<span class="mxinfo " id="T3:U203">1</span></span>)</span> = <span class="mxinfo " id="T3:U204"><span class="mxinfo " id="T3:U205"><span class="mxinfo " id="T3:U206">1</span>/<span class="mxinfo " id="T3:U207">2</span></span>*(<span class="mxinfo " id="T3:U208"><span class="mxinfo " id="T3:U209"><span class="var type1" id="S22T3U266">d</span>^2</span>+<span class="var type1" id="S22T3U268">d</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,28" id="srcline28">28</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="60,29" id="srcline29">29</a></span><span class="line">    <span class="mxinfo " id="T3:U212"><span class="mxinfo " id="T3:U213"><span class="var type1" id="S3T2U272">A</span>(<span class="mxinfo " id="T3:U215">numel(<span class="var type1" id="S2T1U275">r</span>)</span>,<span class="mxinfo " id="T3:U217">numel(<span class="var type1" id="S2T1U278">r</span>)</span>)</span> = <span class="mxinfo " id="T3:U219">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,30" id="srcline30">30</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="60,31" id="srcline31">31</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="60,32" id="srcline32">32</a></span><span class="line"><span class="mxinfo " id="T1:U220"><span class="var type1" id="S2T1U282">r</span> = <span class="mxinfo " id="T1:U222"><span class="var type1" id="S3T2U284">A</span>*<span class="var type1" id="S2T1U285">r</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,33" id="srcline33">33</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="60,34" id="srcline34">34</a></span><span class="line"><span class="mxinfo " id="T3:U225"><span class="mxinfo " id="T3:U226"><span class="var type1" id="S3T2U289">A</span>(<span class="mxinfo " id="T3:U228">1</span>,<span class="mxinfo " id="T3:U229">1</span>)</span> = <span class="mxinfo " id="T3:U230"><span class="mxinfo " id="T3:U231">cos(<span class="var type1" id="S9T3U295">phi0</span>)</span>/<span class="mxinfo " id="T3:U233">cos(<span class="mxinfo " id="T3:U234"><span class="var type1" id="S9T3U299">phi0</span>-<span class="var type1" id="S7T3U300">delta_phi</span></span>)</span></span></span>; </span></span>
<span class="srcline"><span class="lineno"><a href="60,35" id="srcline35">35</a></span><span class="line"><span class="mxinfo " id="T3:U237"><span class="mxinfo " id="T3:U238"><span class="var type1" id="S3T2U304">A</span>(<span class="mxinfo " id="T3:U240">1</span>,<span class="mxinfo " id="T3:U241">2</span>)</span> = <span class="mxinfo " id="T3:U242">(<span class="mxinfo " id="T3:U243"><span class="mxinfo " id="T3:U244"><span class="mxinfo " id="T3:U245"><span class="var type1" id="S5T3U312">delta_x</span>*<span class="mxinfo " id="T3:U247">cos(<span class="var type1" id="S7T3U315">delta_phi</span>)</span></span> + <span class="mxinfo " id="T3:U249"><span class="var type1" id="S6T3U317">delta_y</span>*<span class="mxinfo " id="T3:U251">sin(<span class="var type1" id="S7T3U320">delta_phi</span>)</span></span></span> - <span class="mxinfo " id="T3:U253"><span class="mxinfo " id="T3:U254"><span class="var type1" id="S2T1U323">r</span>(<span class="mxinfo " id="T3:U256">1</span>)</span>*<span class="mxinfo " id="T3:U257">sin(<span class="var type1" id="S7T3U327">delta_phi</span>)</span></span></span>)/<span class="mxinfo " id="T3:U259"><span class="mxinfo " id="T3:U260">cos(<span class="mxinfo " id="T3:U261"><span class="var type1" id="S7T3U332">delta_phi</span> - <span class="var type1" id="S9T3U333">phi0</span></span>)</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="60,36" id="srcline36">36</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="60,37" id="srcline37">37</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
